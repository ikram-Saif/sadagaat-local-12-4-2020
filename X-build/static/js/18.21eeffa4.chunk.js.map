{"version":3,"sources":["components/Donation/DonationTable.js","components/Donation/donate.js"],"names":["DonationTable","t","useTranslation","class","scope","Donate","props","handleFormErrorMessage","e","message","target","value","setCustomValidity","handleChange","setState","name","handleSubmite","preventDefault","data","hid","state","id","amount","currency","loading","axios","post","address","then","response","responseCode","window","location","paymentUrl","setTimeout","iconClass","styleClass","donateTo","catch","err","hubs","render","get","headers","i18n","language","error","console","log","this","bind","className","style","margin","role","onSubmit","onChange","onInvalid","onInput","required","map","hub","key","type","min","data-loading-text","Component","withTranslation"],"mappings":"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","file":"static/js/18.21eeffa4.chunk.js","sourcesContent":["import React from 'react'\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n\r\n function DonationTable(){\r\n\r\n    const { t } = useTranslation();\r\n\r\n     return(\r\n         \r\n        <div class=\"col-xs-12 col-sm-12 col-md-7\">\r\n        <h3 class=\"mt-0 line-bottom\">{t('Donate Through Banks')}</h3>\r\n        <div class=\"table-responsive\">\r\n          <table class=\"table table-bordered\">\r\n            <thead>\r\n              <tr>\r\n                <th>{t('Bank')}</th>\r\n                <th>{t('Branch')}</th>\r\n                <th>{t('Account No')}</th>\r\n              </tr>\r\n            </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td scope=\"col\">{t('Khartoum Bank')}</td>\r\n                    <td>{t('Reyadh')}</td>\r\n                    <td>1290129</td>\r\n                  </tr>\r\n                  <tr>\r\n                 <td scope=\"row\">{t('Abu- Dhabi National Bank')}</td>\r\n                    <td>{t('Headquarters')}</td>\r\n                    <td>891624</td>\r\n                  </tr>\r\n                  <tr>\r\n                  <td scope=\"row\">{t('Export Developing Bank')}</td>\r\n                    <td>{t('Al-Sajana')}</td>\r\n                    <td>4765</td>\r\n                  </tr>\r\n                  <tr>\r\n                  <td scope=\"row\">{t('Al-Neelain Bank')}</td>\r\n                    <td>{t('Al-Namozaji')}</td>\r\n                    <td>5032</td>\r\n                  </tr>\r\n                  <tr>\r\n                  <td scope=\"row\">{t('Al-Salam Bank')}</td>\r\n                    <td>{t('Al-Matar')}</td>\r\n                    <td>305250</td>\r\n                  </tr>\r\n                  <tr>\r\n                  <td scope=\"row\">{t('Al-Nile Bank')}</td>\r\n                    <td>{t('Al-Amaraat')}</td>\r\n                    <td>2654</td>\r\n                  </tr>\r\n                  <tr>\r\n                  <td scope=\"row\">{t('Al-Saudi Bank')}</td>\r\n                    <td>{t('Al-Amaraat')}</td>\r\n                    <td>14195</td>\r\n                  </tr>\r\n                  <tr>\r\n                  <td scope=\"row\">{t('Faisal Islamic Bank')}</td>\r\n                    <td>{t('Barlaman')}</td>\r\n                    <td>12300123</td>\r\n                  </tr>\r\n                </tbody>\r\n          </table>\r\n      </div>\r\n    </div>\r\n\r\n     )\r\n }export default DonationTable;","import React ,{ useState, useEffect, Component }  from 'react';\r\nimport Header from '../sub_page_header'\r\nimport address from './../utils/address';\r\nimport axios from 'axios';\r\nimport { render } from '@testing-library/react';\r\nimport i18n from 'i18next'\r\nimport  {withTranslation}  from 'react-i18next'\r\nimport DonationTable from './DonationTable'\r\n\r\n/**\r\n * This component display donation page  when you click button on the home page \r\n * @see http://sadagaat-uk.org/donate\r\n * @component\r\n */\r\nclass Donate extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = \r\n    {\r\n      id:null,        \r\n      amount: \"\",\r\n      currency:\"SDG\",\r\n      message:'',\r\n      iconClass:'',\r\n      styleClass:'',\r\n      loading: false,\r\n      hubs:[],\r\n      render: false,\r\n\r\n    }\r\n}\r\n/**\r\n * Get hub list from API\r\n */\r\n   async componentDidMount () {\r\n\r\n     await axios.get(`${address()}hubs`, {headers: {'accept-language': `${i18n.language}`}})\r\n        .then(response => {\r\n          const hubs = response.data\r\n          this.setState({hubs})\r\n\r\n          })\r\n\r\n      \r\n        .catch(error => {\r\n          console.log(error);\r\n        })\r\n        setTimeout(function() { \r\n          this.setState({render: true}) }.bind(this), 10)\r\n\r\n  }\r\n  /** \r\n   * Get hub when language cahangeed\r\n   */\r\n  async componentWillReceiveProps(){\r\n\r\n    axios.get(`${address()}hubs`, {headers: {'accept-language': `${i18n.language}`}})\r\n        .then(response => {\r\n          const hubs = response.data\r\n          this.setState({hubs})\r\n          })\r\n\r\n      \r\n        .catch(error => {\r\n          console.log(error);\r\n        })\r\n  }\r\n\r\n/**\r\n * \r\n * @param {object} e event of input field\r\n * @param {String} message  message custom validation message \r\n */\r\n  handleFormErrorMessage =(e,message = '')=>{\r\n    const {t} = this.props\r\n  \r\n    if (e.target.value === '' && message ==='')\r\n    \r\n    e.target.setCustomValidity(t('select a hub from the list'))\r\n    else\r\n    e.target.setCustomValidity(message)\r\n      \r\n    }\r\n\r\n    handleChange=(e)=>{\r\n    \r\n      this.setState({\r\n        [e.target.name]:e.target.value,\r\n      })\r\n  }\r\n\r\n       handleSubmite =(e)=>{\r\n            e.preventDefault()\r\n            const id = this.state.id\r\n\r\n          const data = {\r\n              hid : id ,\r\n              amount:this.state.amount,\r\n              currency:this.state.currency\r\n            }\r\n            this.setState({loading:true})\r\n          axios.post(`${address()}donate`,data)\r\n\r\n\r\n     /** syber bay payment feedback */\r\n\r\n          .then(response =>{\r\n\r\n            if (response.data.responseCode === 1)\r\n            {\r\n                window.location = response.data.paymentUrl\r\n\r\n                setTimeout(() => {\r\n                  this.setState({ loading: false });\r\n                }, 2000)\r\n            } else if(response.data.responseCode === 2)\r\n            {\r\n              this.setState({\r\n\r\n                  message :\"Please Enter Valid Amount\",\r\n                  iconClass:'fa fa-times-circle',\r\n                  styleClass:'error-msg',\r\n                  donateTo:'Sadagaat', \r\n                })\r\n              } else\r\n              {\r\n                this.setState(\r\n                  {\r\n                    message :\"something went wrong try again later\",\r\n                    iconClass:'fa fa-times-circle',\r\n                    styleClass:'error-msg',\r\n                    donateTo:'Sadagaat', \r\n                  })\r\n\r\n              }\r\n            \r\n              }) .catch(err => {\r\n                this.setState({loading:true })\r\n\r\n                let message;\r\n\r\n                if (err.message === 'Network Error')\r\n                  message = 'Network Error'\r\n                  else \r\n                  message = 'something went wrong try again later'\r\n                  setTimeout(() => {\r\n                        this.setState({ loading: false,\r\n                                        message:message,\r\n                                        iconClass:'fa fa-times-circle',\r\n                                        styleClass:'error-msg'\r\n                                      });\r\n                      }, 2000)\r\n                  })\r\n   \r\n  }\r\n  \r\n\r\n   render(){\r\n    let renderContainer = false\r\n     const{t}= this.props\r\n     const loading  = this.state.loading;\r\n\r\n\r\n    return (\r\n\r\n    <div>\r\n      <Header name={t('Donate')}/>\r\n\r\n      <section>\r\n        <div class=\"container\">\r\n          <div class=\"section-content\">\r\n            <div class=\"row\">\r\n              <div class=\"col-xs-12 col-sm-12 col-md-5\">\r\n               \r\n                <h3 class=\"mt-0 line-bottom\">{t('Donate Through SyberPay')}\r\n                    <span class=\"font-weight-300\"></span>\r\n                </h3>\r\n                   <p className={this.state.styleClass}>\r\n                     <i className ={this.state.iconClass} style = {{margin:'5px'}}>\r\n                     </i>\r\n                    {t(this.state.message)}\r\n                   </p>\r\n                  <form\r\n                       //data-toggle=\"validator\"\r\n                        role=\"form\"\r\n                       id=\"popup_paypal_donate_form_onetime_recurring\"\r\n                       onSubmit = {this.handleSubmite}\r\n                    >\r\n\r\n                      <div className=\"row\">\r\n                       <div className=\"col-sm-12\">\r\n                        <div className=\"form-group mb-20\">\r\n                          <label><strong>{t('I Want to Donate for')}</strong></label>\r\n\r\n                          <select    \r\n                              name=\"id\"\r\n                              className=\"form-control\"\r\n                              onChange ={this.handleChange}\r\n                              onInvalid = {(e)=> this.handleFormErrorMessage(e)}\r\n                              onInput={function(e) {\r\n                                e.target.setCustomValidity(t(''))}}\r\n                              required\r\n                              >\r\n                                <option value = ''>{t('Select Hub')}...</option>\r\n                              {this.state.hubs.map(hub =>\r\n                              <option key={hub.id} value = {hub.id} >\r\n\r\n                                {hub.name}\r\n                                </option>\r\n                              )}\r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                      </div>\r\n\r\n                      <div className=\"row\">\r\n                   \r\n                      <div className=\"col-sm-9\">\r\n                       <div className=\"form-group mb-20\">\r\n                          <label><strong>{t('How much do you want to donate?')}</strong></label>\r\n\r\n                           <input\r\n                               id = 'id'\r\n                                name=\"amount\" \r\n                                className=\"form-control\"\r\n                                type=\"number\" \r\n                                min=\"1\"\r\n                                onChange ={this.handleChange}\r\n                                onInvalid = {(e)=> this.handleFormErrorMessage(e,t('Enter a valid amount'))}\r\n                                onInput={function(e) {\r\n                                    e.target.setCustomValidity(t(''))}}\r\n                                required\r\n                               />\r\n                               \r\n                            <div className=\"help-block with-errors\"></div>\r\n                          </div>\r\n                        </div>\r\n                     \r\n                        <div className=\"col-sm-3\">\r\n                         <div className=\"form-group mb-20\">\r\n                              <label><strong> <br/> </strong></label>\r\n\r\n                           <select\r\n                                name=\"currency\" \r\n                                className=\"form-control\"\r\n                                onChange ={this.handleChange}\r\n                               >\r\n                                 <option name =\"currency\">SDG</option>\r\n                            </select>\r\n                          </div>\r\n                        </div>\r\n                        </div>\r\n                      \r\n\r\n                      <div className=\"col-sm-12\">\r\n                        <div className=\"form-group\">\r\n                          <button type=\"submit\" \r\n                            className=\"btn btn-flat btn-dark btn-theme-colored mt-10 pl-30 pr-30\"\r\n                            data-loading-text=\"Please wait...\">\r\n                               {loading && (\r\n                                          <i\r\n                                            className=\"fa fa-spinner fa-spin\"\r\n                                            style={{ margin: \"5px\" }}\r\n                                          />\r\n                                        )}\r\n                              {t('Donate')} {t('Now!')}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                  </form>     \r\n                </div>\r\n                \r\n                    <DonationTable />\r\n\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n             </div>\r\n    )\r\n}\r\n}\r\n\r\nexport default withTranslation()(Donate);\r\n"],"sourceRoot":""}